(()=>{var e={};e.id=199,e.ids=[199],e.modules={2507:(e,s,t)=>{"use strict";t.d(s,{U:()=>i});var r=t(80261),a=t(44999);async function i(){let e=await (0,a.UL)();return(0,r.createServerClient)("https://enpplseddbfstmefufee.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVucHBsc2VkZGJmc3RtZWZ1ZmVlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAwNTgyMDUsImV4cCI6MjA2NTYzNDIwNX0.TxFqh1lGx91iKIOIZC-qnjT6n0s1jnBGH9R8SXMwCAE",{cookies:{getAll:()=>e.getAll(),setAll(s){try{s.forEach(({name:s,value:t,options:r})=>e.set(s,t,r))}catch{}}}})}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},34631:e=>{"use strict";e.exports=require("tls")},39727:()=>{},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},47990:()=>{},51906:e=>{function s(e){var s=Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}s.keys=()=>[],s.resolve=s,s.id=51906,e.exports=s},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},78335:()=>{},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91175:(e,s,t)=>{"use strict";t.r(s),t.d(s,{patchFetch:()=>d,routeModule:()=>p,serverHooks:()=>g,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>m});var r={};t.r(r),t.d(r,{GET:()=>n});var a=t(96559),i=t(48088),c=t(37719),o=t(2507),u=t(32190);async function n(){try{let e=await (0,o.U)(),s={success:!0,messages:[]};try{let{data:t}=await e.storage.listBuckets();if(t?.find(e=>"cow-images"===e.name))s.messages.push("Cow images bucket already exists");else{let{error:t}=await e.storage.createBucket("cow-images",{public:!0,fileSizeLimit:5242880});if(t)s.messages.push(`Error creating bucket: ${t.message}`);else{s.messages.push("Created cow-images bucket successfully");try{await e.storage.from("cow-images").getPublicUrl("test.txt")}catch(e){s.messages.push(`Warning: Could not verify bucket public access: ${e.message}`)}}}}catch(e){s.messages.push(`Bucket setup error: ${e.message||JSON.stringify(e)}`)}try{let{data:t}=await e.from("pg_tables").select("tablename").eq("schemaname","public").eq("tablename","cows");if(t&&0!==t.length){s.messages.push("Cows table already exists");let{error:t}=await e.from("information_schema.columns").select("column_name").eq("table_schema","public").eq("table_name","cows").eq("column_name","age");if(t)s.messages.push(`Error checking age column: ${t.message}`);else{let{error:t}=await e.rpc("add_age_column_if_not_exists");t?s.messages.push(`Error adding age column: ${t.message}`):s.messages.push("Age column setup complete")}}else{let{error:t}=await e.rpc("create_cow_table_if_not_exists");t?s.messages.push(`Error creating cows table: ${t.message}`):s.messages.push("Created cows table successfully")}}catch(e){s.messages.push(`Table setup error: ${e.message||JSON.stringify(e)}`)}try{let{error:t}=await e.rpc("execute_sql",{sql_query:"ALTER TABLE IF EXISTS public.cows ADD COLUMN IF NOT EXISTS age NUMERIC;"});t?s.messages.push(`SQL execution error: ${t.message}`):s.messages.push("Direct SQL execution successful")}catch(e){s.messages.push(`SQL execution error: ${e.message||JSON.stringify(e)}`)}return u.NextResponse.json(s)}catch(e){return console.error("Database initialization error:",e),u.NextResponse.json({success:!1,error:e.message||"Unknown error occurred during database initialization"},{status:500})}}let p=new a.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/init-db/route",pathname:"/api/init-db",filename:"route",bundlePath:"app/api/init-db/route"},resolvedPagePath:"D:\\Work\\Gaushala Cow Managment\\Gaushala Cow Managment\\src\\app\\api\\init-db\\route.ts",nextConfigOutput:"",userland:r}),{workAsyncStorage:l,workUnitAsyncStorage:m,serverHooks:g}=p;function d(){return(0,c.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:m})}},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96487:()=>{}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[447,875,580],()=>t(91175));module.exports=r})();